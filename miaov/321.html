<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>事件中级</title>
	<style>
		#ul1{position:absolute; display:none;}
		#div1{position:absolute; width:100px; height:100px; background-color:red;}
	</style>
	<script>
		window.onload = function() {
			var oUl = document.getElementById('ul1');

			document.oncontextmenu = function(ev) {
				var oEvent = ev || event;
				oUl.style.display = 'block';
				oUl.style.left = oEvent.clientX + 'px';
				oUl.style.top = oEvent.clientY + 'px';
				return false;
			};

			var oForm = document.getElementById('form1');
			oForm.onsubmit = function() {
				return false;
			};

			var oTxt = document.getElementById('txt1');
			oTxt.onkeydown = function(ev) {
				var oEvent = ev || event;
				if (oEvent.keyCode != 8 && (oEvent.keyCode < 48 || oEvent.keyCode > 57)) {
					return false;
				}
			};
			document.onclick = function() {
				oUl.style.display = 'none';
			};

			var oDiv = document.getElementById('div1');
			var disX = 0;
			var disY = 0;
			oDiv.onmousedown = function(ev) {
				var oEvent = ev || event;
				disX = oEvent.clientX - oDiv.offsetLeft;
				disY = oEvent.clientY - oDiv.offsetTop;
				oDiv.onmousemove = function(ev) {
					var oEvent = ev || event;
					var l = oEvent.clientX - disX;
					var t = oEvent.clientY - disY;
					if (l < 0) {
						l = 0;
					}
					else if (l > document.documentElement.clientWidth - oDiv.offsetWidth) {
						l = document.documentElement.clientWidth - oDiv.offsetWidth;
					}
					if (t < 0) {
						t = 0;
					}
					else if (t > document.documentElement.clientHeight - oDiv.offsetHeight) {
						t = document.documentElement.clientHeight - oDiv.offsetHeight;
					}
					oDiv.style.left = l + 'px';
					oDiv.style.top = t + 'px';
				};
				oDiv.onmouseup = function() {
					oDiv.onmousemove = null;
					oDiv.onmouseup = null;
				};

				return false;
			};
			console.log(document.documentElement.clientWidth);
		};
	</script>
</head>
<body>
<form id="form1" action="http://s5s5.me/">
	<input type="submit">
</form>
<input id="txt1" type="text">
<ul id="ul1">
	<li>登录</li>
	<li>回到首页</li>
	<li>注销</li>
	<li>加入VIP</li>
</ul>
<div id="div1"></div>
</body>
</html>