<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>事件基础</title>
	<style>
		.div2{width:10px; height:10px; background-color:blue; position:absolute;}
	</style>
	<script>
		window.onload = function() {
			var a = undefined || 12;
			console.log('undefined || 12 ' + a);

			var oBtn = document.getElementById('btn1');
			var oDiv = document.getElementById('div1');
			oBtn.onclick = function(ev) {
				var oEvent = ev || event;
				oDiv.style.display = 'block';
				oEvent.cancelBubble = true;
			};

			var i = 1;
			document.onclick = function(ev) {
				var oEvent = ev || event;
				console.log('you click ' + i + ' (' + oEvent.clientX + ',' + oEvent.clientY + ')');
				i++;
				oDiv.style.display = 'none';
			};

			var aDiv2 = document.getElementsByClassName('div2');
			setInterval(function() {
				for (i = aDiv2.length - 1; i > 0; i--) {
					aDiv2[i].style.left = aDiv2[i - 1].style.left;
					aDiv2[i].style.top = aDiv2[i - 1].style.top;
				}
			}, 5);
			document.onmousemove = function(ev) {
				var oEvent = ev || event;
				var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
				var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;

				aDiv2[0].style.left = oEvent.clientX + scrollLeft + 10 + 'px';
				aDiv2[0].style.top = oEvent.clientY + scrollTop + 10 + 'px';
			};

			var kl = null;
			var kr = null;
			document.onkeydown = function (ev) {
				var oEvent = ev || event;
				var oDiv3 = document.getElementById('div3');
//				alert(oEvent.keyCode);
				if (oEvent.keyCode === 37) {
					clearInterval(kl);
					clearInterval(kr);
					kl = setInterval(function() {
						oDiv3.style.left = oDiv3.offsetLeft - 10 + 'px';
//						console.log(oDiv3.offsetLeft);
					}, 30);
				}
				else if (oEvent.keyCode === 39) {
					clearInterval(kl);
					clearInterval(kr);
					kr = setInterval(function() {
						oDiv3.style.left = oDiv3.offsetLeft + 10 + 'px';
					}, 30);
				}
			};
			document.onkeyup = function() {
				clearInterval(kl);
				clearInterval(kr);
			};

			var oSubmit = document.getElementById('submit');
			var oTxt1 = document.getElementById('txt1');
			var oTxt2 = document.getElementById('txt2');
			oSubmit.onclick = function() {
				oTxt1.value += oTxt2.value + '\n';
				oTxt2.value = '';
			};
			oTxt2.onkeydown = function(ev) {
				var oEvent = ev || event;
				if (oEvent.ctrlKey && oEvent.keyCode === 13) {
					oTxt1.value += oTxt2.value + '\n';
					oTxt2.value = '';
				}
			};
		};
	</script>
</head>
<body style="height:2000px;">
<button type="button" id="btn1">show</button>
<div style="width:200px; height:200px; background-color:red; display:none;" onclick="console.log(this.style.backgroundColor);" id="div1">
	<div style="width:100px; height:100px; background-color:yellow;" onclick="console.log(this.style.backgroundColor);"></div>
</div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div class="div2"></div>
<div id="div3" style="width:50px; height:50px; background-color:#ff8c00; position:relative;"></div>
<textarea id="txt1"></textarea><br>
<input type="text" id="txt2"><button type="button" id="submit">submit</button>
</body>
</html>