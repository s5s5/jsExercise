<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Catch Gold</title>
	<script src="crafty-min.js"></script>
</head>
<body>
<script>
	Crafty.init(800, 600);
	Crafty.background('rgb(127,127,127)');

	//Paddles
	Crafty.e("Paddle, 2D, DOM, Color, Multiway")
			.color('rgb(255,255,255)')
			.attr({ x: 350, y: 550, w: 100, h: 10 })
			.multiway(4, { LEFT_ARROW: 180, RIGHT_ARROW: 0 });

	//Ball
	function Ball() {
		Crafty.e("2D, DOM, Color, Collision")
				.color('rgb(255,255,0)')
				.attr({ x: 395, y: 10, w: 10, h: 10, dY: Crafty.math.randomInt(2, 10)
				})
				.bind('EnterFrame', function () {
					if (this.y > 600) {
						this.y = 10;
						this.x = Crafty.math.randomNumber(10, 790)
					}

					this.y += this.dY;
				})
				.onHit('Paddle', function () {
					this.y = 10;
					this.x = Crafty.math.randomNumber(10, 790)
					Crafty("LeftPoints").each(function () {
						this.text(++this.points + " Gold")
					});
//					Crafty("Result").each(function () {
//						this.text(++this.points + " Gold")
//					});

				})
	}
	function Bullnums(num) {
		for (var i = 0; i < num; i++) {
			Ball();
		}
	}
	Bullnums(8);


	//bock ball
	Crafty.e("2D, DOM, Color, Collision")
			.color('rgb(0,0,0)')
			.attr({ x: 395, y: 10, w: 10, h: 10, dY: Crafty.math.randomInt(2, 10)
			})
			.bind('EnterFrame', function () {

				if (this.y > 600) {
					this.y = 10;
					this.x = Crafty.math.randomNumber(10, 790)
				}

				this.y += this.dY;
			})
			.onHit('Paddle', function () {
				Crafty.pause();
			})

	setTimeout("Crafty.pause()", 10100);
	//Score boards
	Crafty.e("LeftPoints, DOM, 2D, Text")
			.attr({ x: 20, y: 20, w: 100, h: 20, points: 0 })
			.text("0 Gold");
	Crafty.e("Clock, DOM, 2D, Text")
			.attr({ x: 760, y: 20, w: 20, h: 20 })
			.text('60');
	function nums(f) {
		Crafty("Clock").each(function () {
			this.text(f);
		});
	}
	function _nums(f) {
		return function() {
			nums(f);
		}
	}
	function Clocks(num) {
		for (var i = num; i >= 0; i--) {
			var tims = (num - i) * 1000;
			setTimeout(_nums(i), tims);
		}
	}
	Clocks(10);

//	Crafty.c("Keyboard", {
//		isDown: function (key) {
//			if (typeof key === "SPACE") {
//				Crafty.init();
//			}
//		}
//	});

</script>
</body>
</html>